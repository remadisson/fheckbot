<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Fhot's Warteschlange</title>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
</head>
<body style="background-color: #121212; color: #DDDDDD; font-family: Arial; margin: 0; padding: 0;">
<div id="navbar" style="background-color: #1E1E1E; margin-top: -10px; padding-left: 2%; padding-top: 10px; padding-bottom: 5px; box-shadow: 5px 5px 4px #090909;">
    <h2 id="headline">FhotBots Warteschlange</h2>
</div>

<br>

<!--TODO ADDING SKIP -->

<div id="currentTrackDiv" style="margin-left: 2%; margin-right: 40%; padding: 0.25% 2% 1%; background-color: #292929; border-radius: 15px; box-shadow: 5px 5px 4px #090909;">
    <h3 id = "currentTrackHeadline">Derzeit spielt:</h3>
    <span><a id="currentTrack" style="color: #DDDDDD; text-decoration: none;">Platzhalter</a></span>
</div>

<br>

<div id="queueDiv" style="margin-left: 2%; margin-right: 40%; padding: 0.25% 2% 1%;background-color: #292929; border-radius: 15px; box-shadow: 5px 5px 4px #090909;">
    <h4 id="queuedHeadline">Als n√§chstes:</h4>
    <ul id="queue" style="list-style-type: value;">
    </ul>
</div>

<script>function updateData() {$.getJSON("https://remady.me/queue", function(data){
    if(data.status === 404){
        document.getElementById("currentTrackHeadline").innerText = data.message + " - " + data.status;
        document.getElementById("currentTrack").hidden = true;
        document.getElementById("queuedHeadline").hidden = true;
        document.getElementById("queueDiv").hidden = true;
        return;
    }

    let currentTrack = data.currentlyPlaying;
    document.getElementById("currentTrack").innerText = currentTrack.title + " von " + currentTrack.author + " (" + currentTrack.length + ")";
    document.getElementById("currentTrack").setAttribute("href", currentTrack.link);

    for(let i = 0; i < data.queue.length; i++){
        const queuedTrack = data.queue[i];
        let listItem = document.createElement('li');
        let anchor = document.createElement("a");
        anchor.innerText = queuedTrack.title + " von " + queuedTrack.author + " (" + queuedTrack.length + ")"
        anchor.setAttribute("href", queuedTrack.link);
        anchor.setAttribute("style", "color: #DDDDDD; text-decoration: none;");
        listItem.appendChild(anchor);
        listItem.setAttribute("name", "queueListItems");
        document.getElementById("queue").appendChild(listItem);
    }

})}
updateData();

</script>
</body>

</html>